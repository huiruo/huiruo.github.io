"use strict";(self.webpackChunkprogramming_technology=self.webpackChunkprogramming_technology||[]).push([[7195],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>g});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)t=l[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)t=l[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var r=o.createContext({}),c=function(e){var n=o.useContext(r),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=c(e.components);return o.createElement(r.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,r=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(t),m=a,g=d["".concat(r,".").concat(m)]||d[m]||u[m]||l;return t?o.createElement(g,s(s({ref:n},p),{},{components:t})):o.createElement(g,s({ref:n},p))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,s=new Array(l);s[0]=m;var i={};for(var r in n)hasOwnProperty.call(n,r)&&(i[r]=n[r]);i.originalType=e,i[d]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<l;c++)s[c]=t[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},14185:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var o=t(87462),a=(t(67294),t(3905));const l={title:"\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll",sidebar_position:5},s=void 0,i={unversionedId:"\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise/\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll",id:"\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise/\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll",title:"\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll",description:"",source:"@site/programming-tech/\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise/\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll.md",sourceDirName:"\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise",slug:"/\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise/\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll",permalink:"/\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise/\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll",draft:!1,editUrl:"https://github.com/huiruo/programming-tech-website/programming-tech/\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise/\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"\u4f7f\u7528-tabControl-\u4e24\u4e2a\u8bf7\u6c42\u5408\u5e76promiseAll",sidebar_position:5},sidebar:"docs",previous:{title:"\u4f7f\u7528-promise\u6a21\u62df\u8bf7\u6c42",permalink:"/\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/promise/\u4f7f\u7528-promise\u6a21\u62df\u8bf7\u6c42"},next:{title:"babel\u8f6c\u5316es6",permalink:"/\u89e3\u6790-\u89e3\u91ca-\u7f16\u8bd1-\u4e8b\u4ef6\u5faa\u73af-promise-\u5b89\u5168/04-1-babel\u8f6c\u5316es6"}},r={},c=[],p={toc:c},d="wrapper";function u(e){let{components:n,...t}=e;return(0,a.kt)(d,(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import axios from 'axios'\nimport baseUrl from \"../../urlConfig.js\";\n// import mockData from \"../../mockData.js\";\nconst state = {\n    componentSwip: false,\n    baseData: null,\n    speciesData: null,\n    tabInitData: [],  //\u4e00\u4e2atab\u6570\u636e\n}\nconst getters = {}\nconst mutations = {\n    getMouseoverAction(state, value) {\n        console.log(\"getMouseoverAction22\uff1a\", value)\n        state.MouseoverAction = value;\n    },\n    componentSwip(state, value) {\n        console.log(\"componentSwip22\uff1a\", value)\n        state.componentSwip = value;\n    },\n    getData2(state, res) {\n        console.log(\"\u6570\u636e\u83b7\u53d6\u6210\u529f\uff0c\u51c6\u5907\u6e32\u67d3\uff1a\")\n        state.baseData = res[0]\n        state.speciesData = res[1]\n        console.log(state.baseData)   //02\u603b\u7684\u57fa\u7840\u6570\u636e,\u4fee\u6539\u4e4b\u540e\u65e0\u6548\n        console.log(state.speciesData)  //03.\u6620\u5c04\u6570\u636e        \n\n    },\n    getdata(state, res) {  //\u6d4b\u8bd5\u65b9\u6cd501.\n        console.log(\"\u6570\u636e\u83b7\u53d6\u6210\u529f\uff0c\u51c6\u5907\u6e32\u67d3\uff1a\")\n        state.baseData = res[0]\n        state.speciesData = res[1]\n        console.log(state.baseData)   //02\u603b\u7684\u57fa\u7840\u6570\u636e\n        console.log(state.speciesData)  //03.\u6620\u5c04\u6570\u636e\n\n        console.log(\"==============\")\n        //01.**tab\u8868\u5934\u7684\u503c\n        state.basic_module = state.baseData.module //01.tab\u79cd\u7c7b\uff1a\u5982 \u7269\u7406\u6027\u80fd\n        state.basic_row = state.baseData.row   //02.\u57fa\u7840\u503c\n        state.basic_module_col = state.baseData.module_col  //03.\u57fa\u7840\u503c\uff0c\u7528\u4e8e\u5bf9\u5e94 attribute_detail \u5c5e\u6027\u540d(\u4e5f\u5c31\u662f\u5728attribute_detail\u53d6\u503c)\n        console.log(state.basic_module_col)\n        state.basic_data = state.baseData.basic_data   //02.\u57fa\u7840\u503c\n\n        // console.log(state.basic_module)\n        // console.log(state.basic_row)\n        // console.log(state.basic_data)\n        for (let i = 0; i < state.speciesData.length; i++) {\n            let mod_id = state.speciesData[i].mod_id  //base physical\n            //01.\u67e5\u627e\u8868\u5934\n            // console.log(state.data_module[mod_id].mod_ch) //\u7269\u7406\u6027\u80fd \u5e94\u7528\u8981\u6c42\n            //02.\u67e5\u627e\u5c55\u793a\u7684\u540d\n            let displayRowlist = state.speciesData[i].stans[0].row_list\n            console.log(\"\u67e5\u627e\u5c55\u793a\u7684\u5217--\x3e\" + i)\n            console.log(displayRowlist)\n            //\u8fd9\u4e2a\u662f\u603b\u7684\u6620\u5c04\u6570\u636e\uff0c\u4e00\u822c\u6709\u597d\u51e0\u6761\uff0c\u6839\u636edisplayRowlist[i].row_id\n            //\u53d6 state.basic_row \u91cc\u9762\u7684\u6570\u636e(state.basic_row.\u6620\u5c04id)\n\n            let tabDisplayRowObj = null  //=\u5b58\u5c55\u793a\u7684\u5217\n            let dataObj = {             //=\u4e00\u4e2atab \u5b8c\u6574\u7684\u6570\u636e\n                tabNameZh: state.basic_module[mod_id].mod_ch,\n                tabDisplayRow: [],\n            }\n\n            //**\u67e5\u627e\u5f53\u524d\u5c5e\u6027\n            let current_module_col = state.basic_module_col[mod_id]\n            console.log(current_module_col)\n\n            for (let i = 0; i < displayRowlist.length; i++) {\n                console.log(\"=============AAAAAAAAAA\u7b2c\u4e8c\u4e2afor\u5faa\u73af\u5f00\u59cb\u67e5\u627e\u5c55\u793a\u7684\u5217\" + i + \":\" + displayRowlist[i].row_id)\n                // console.log(displayRowlist[i])\n                let displayRowData = state.basic_row[displayRowlist[i].row_id]\n                console.log(\"\u88ab\u53d6\u5f97\u5bf9\u8c61,\u57fa\u7840\u7684\u503c------\u300b\")\n                console.log(displayRowData)\n                console.log(\"\u88ab\u53d6\u5f97\u5bf9\u8c612,\u5c55\u793a\u7684\u503c------\u300b\")\n                console.log(displayRowlist[i])\n                let displayRowlist_value = displayRowlist[i].value\n\n                let rowName = ''\n                let row1 = []\n                for (let i = 0; i < current_module_col.length; i++) {\n                    console.log(\"<==========\u8282\u70b9\u5c5e\u6027\u540d==============>\")\n                    console.log(current_module_col[i])\n                    /**\n                    <==========\u8282\u70b9\u5c5e\u6027\u540d==============>\n                    name\n                    <==========\u8282\u70b9\u5c5e\u6027\u540d==============>\n                    chinese_context\n                    <==========\u8282\u70b9\u5c5e\u6027\u540d==============>\n                    english_context\n                     * \n                     */\n                    let rowZhTyp = null\n                    if (current_module_col[i] == 'name') {  //name \u5c5e\u6027\u5355\u72ec\u5904\u7406\n                        rowName = displayRowData.attribute_detail[current_module_col[i]].col[0].colDefaultvalue\n                    } else if (current_module_col[i] == 'english_context') {  //\u4e0d\u5904\u7406 english_context \u5c5e\u6027\n                        console.log(\"_________$$$$$$$$$$$\u4e0d\u5904\u7406 english_context \u5c5e\u6027\")\n                    } else {\n                        rowZhTyp = displayRowData.attribute_detail[current_module_col[i]]\n                        console.log(\"----------------8999000\u9664name\u5c5e\u6027\u7684\u5176\u4ed6\u5c5e\u6027\" + current_module_col[i] + \"-------------------\")\n                        console.log(rowZhTyp)\n                        console.log(\"rowZhTyp_colType\u7684\u503c\uff1a\" + rowZhTyp.colType)\n                        /**\n                            1.auto \u6839\u636ecolDefaultvalue\u53d6\u503c\n                            2.select \u6839\u636ecolBinding\u53d6\u503c\n                            3.list \u6839\u636ecolBinding\u53d6\u503c\n                            4.object \u6839\u636ecol\u6570\u636e\u5904\u7406 \n                         */\n                        let rowZhTyp_colType = rowZhTyp.colType\n                        if (rowZhTyp_colType == 'select') {\n                            console.log('----\x3e select_\u6839\u636ecolBinding\u53d6\u503c:' + rowZhTyp_colType)\n                            let colBindingStr = 'i' + rowZhTyp.colBinding\n                            // console.log(state.basic_data.data[colBindingStr])\n                            // console.log(displayRowlist_value)\n                            let state_basic_d_d = state.basic_data.data[colBindingStr]\n                            let chinese_context = displayRowlist_value.chinese_context\n                            for (let i = 0; i < chinese_context.length; i++) {\n                                //\u53ea\u9700\u8981\u4e2d\u6587\u540d(cname)\n                                // console.log(state_basic_d_d['i' + chinese_context[i]].cname)  \n                                row1.push(state_basic_d_d['i' + chinese_context[i]].cname)\n                            }\n                        } else if (rowZhTyp_colType == 'list') {\n                            console.log('----\x3elist\u6839\u636ecolBinding\u53d6\u503c:' + rowZhTyp_colType)\n                            console.log(rowZhTyp)\n                            if (current_module_col[i] == 'condition') {  //**1.condition\u7279\u6b8a\u5904\u7406\n                                let colBindingStr = 'i' + rowZhTyp.colBinding\n                                // console.log(state.basic_data.data[colBindingStr])\n                                // console.log(displayRowlist_value)\n                                let state_basic_d_d = state.basic_data.data[colBindingStr]\n                                console.log('condition\u7684\u503cPPPPPPPP')\n                                console.log(state_basic_d_d)  //\u53d6\u91cc\u9762\u7684\u503c\n                            } else {  //** 2.\u975econdition\u7279\u6b8a\u5904\u7406\n                                /**\n                                 * 2\uff09   \u5f53\u8be5\u5217\u4e0d\u4e3a\u201d condition\u201d\u65f6\uff0c\u6839\u636e\u884c\u5b9a\u4e49\u7684(row)colBinding\u7ed3\u5408\u6570\u636e(species )\u4e2dvalue\u503c\uff0c\u5230basic_data. data\u4e2d\u83b7\u53d6\u5bf9\u5e94\u7684\u503c\u3002\uff08\u53ea\u6709\u4e00\u4e2a\u503c\uff09\u3002\n                                 */\n                                console.log('condition\u7684\u503cAAAAA')\n                                console.log(rowZhTyp)\n                                let colBindingStr = 'i' + rowZhTyp.colBinding\n                                console.log(colBindingStr)\n                                console.log(displayRowlist_value)\n                                console.log(current_module_col[i])\n                                // console.log(displayRowlist_value.current_module_col[i])\n                            }\n                        } else if (rowZhTyp_colType == 'auto') {\n                            console.log('----\x3eauto \u6839\u636ecolDefaultvalue\u53d6\u503c')\n                            console.log(rowZhTyp)\n                        } else if (rowZhTyp_colType == 'object') {\n                            console.log('----\x3eobject \u6839\u636ecol\u6570\u636e\u5904\u7406 ')\n                            console.log(rowZhTyp)\n                        }\n                    }\n                }\n                tabDisplayRowObj = {\n                    rowName: rowName,\n                    row1: row1,\n                }\n                dataObj.tabDisplayRow.push(tabDisplayRowObj)\n            }\n\n            state.tabInitData.push(dataObj)  //2019.7.31\u4fee\u6539\u4e3amock\u6570\u636e\u8fdb\u884c\u6d4b\u8bd5\n            // console.log('\u4fee\u6539\u4e3amock\u6570\u636e\u8fdb\u884c\u6d4b\u8bd5-----\u300b')\n            // console.log(mockData)\n            // state.tabInitData = mockData\n        }\n        //02.**\u5c55\u793a\u7684\u5b9e\u9645\u540d\n\n        //03.**basic_data \u5c55\u793a\u7684\u5b9e\u9645\u503c\n        state.basic_data = state.baseData.basic_data\n        console.log(\"basic_data\u5c55\u793a\u7684\u5b9e\u9645\u503c\")\n        console.log(state.basic_data)\n\n        console.log(\"\u6700\u7ec8\u6e32\u67d3\u5230\u9875\u9762\u7684\u6570\u636e=====\u300b\")\n        console.log(state.tabInitData)\n    }\n}\nfunction parseFormData(data) {\n    let newData = new FormData();\n    for (let i in data) {\n        newData.append(i, data[i]);\n    }\n    return newData;\n}\n//**01.\u63d0\u4ea4\u5230\u7ebf\u4e0a\u5f97\u6ce8\u91ca\uff0c\u672c\u5730\u9879\u76ee\u6d4b\u8bd5\u7528\n// /** \nlet promiseLogin = new Promise((resolve, reject) => {\n    //\u521d\u59cb\u5316promise \u72b6\u6001(\u540c\u6b65)\uff1apending: \u521d\u59cb\u5316\u72b6\u6001\n    let data = parseFormData({\n        username: '15692426057',\n        password: 'abchen183123',\n    });\n    //***\u8bf7\u6c42\u767b\u5f55\u63a5\u53e3 start\n    //***\u8bf7\u6c42\u767b\u5f55\u63a5\u53e3 start\n    axios({\n        method: 'post',\n        url: '/api/login/ajax',\n        data: data,\n        headers: { 'X-Requested-With': 'XMLHttpRequest', 'Client-Type': 1 }\n    }).then(res => {\n        if (res.data.status == 1) {\n            console.log(\"\u767b\u5f55\u6210\u529f\")\n            resolve()\n        } else {\n            console.log(\"\u767b\u5f55\u5931\u8d251\")\n            reject()\n        }\n    }).catch(function (err) {\n        console.log(\"\u767b\u5f55\u5931\u8d25catch\")\n    });\n})\n// */\n\nfunction getInitData(flag) {\n    return new Promise(function (resolve, reject) {\n        const url = baseUrl + '/plastic/advanceSearchCond'   //1.\u672c\u9879\u76ee\u6d4b\u8bd5\n        // const url2 = 'https://wn3r59eejh.17suzao.com/plastic/advanceSearchCond'  //2.\u63d0\u4ea4\u5230\u7ebf\u4e0a\u6d4b\u8bd5\n        // const url3 = ''  //3.\u63d0\u4ea4\u5230\u6b63\u5f0f\u7ad9\n\n        let params = name\n        if (flag) {\n            // console.log(\"\u641c\u7d22\u4fe1\u606f\u8bf7\u6c42\")\n            params = {\n                act: 'species',   //\u5f53\u4f20base\u4e3a\u57fa\u7840\u4fe1\u606f\u8868\n                species: 'pa66',\n            }\n        } else {\n            // console.log(\"\u57fa\u7840\u6570\u636e\u8bf7\u6c42\")\n            params = {  //1\n                act: 'base',   //\u5f53\u4f20base\u4e3a\u57fa\u7840\u4fe1\u606f\u8868\n            }\n        }\n        axios(\n            {\n                method: \"get\",\n                url: url,\n                params: params,\n                headers: { 'X-Requested-With': 'XMLHttpRequest' }\n            }\n        ).then((res) => {\n            // console.log(res)\n            // console.log(res.data.data)\n            resolve(res.data.data);\n        })\n    });\n}\n\n\nconst actions = {\n    getdata(context) {\n        //***02.\u672c\u5730\u9879\u76ee\u6d4b\u8bd5\u7528promise,\u7528\u4e8e\u767b\u5f55\uff0c\u63d0\u4ea4\u5230\u7ebf\u4e0a\u5f97\u6ce8\u91ca\n        promiseLogin.then(() => {\n            //***\u53bb\u62ff\u6570\u636estart\n            //***\u53bb\u62ff\u6570\u636estart\n            let base = getInitData(0) //\u57fa\u7840\u4fe1\u606f\n            let species = getInitData(1)  //\u641c\u7d22\u4fe1\u606f\n            Promise.all([base, species]).then(function (results) {\n                // context.commit('getdata', results)\n                context.commit('getData2', results)\n                // results.forEach(function (result) {\n                //     console.log(\"\u6570\u636e\")\n                //     console.log(result);\n                // });\n            }).catch(function (err) {\n                console.log(\"Promiseall\u9519\u8bef\")\n                console.log(err);\n            });\n            //***\u62ff\u6570\u636eend\n            //***\u62ff\u6570\u636eend\n        }).catch((error) => {\n            console.log(\"\u9700\u8981\u767b\u5f55\u62ff\u6570\u636e\");\n        })\n    }\n}\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n")))}u.isMDXComponent=!0}}]);