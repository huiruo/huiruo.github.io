"use strict";(self.webpackChunkprogramming_technology=self.webpackChunkprogramming_technology||[]).push([[9740],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>s});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var a=n.createContext({}),k=function(e){var t=n.useContext(a),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},u=function(e){var t=k(e.components);return n.createElement(a.Provider,{value:t},e.children)},E="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,a=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),E=k(r),p=o,s=E["".concat(a,".").concat(p)]||E[p]||d[p]||i;return r?n.createElement(s,c(c({ref:t},u),{},{components:r})):n.createElement(s,c({ref:t},u))}));function s(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,c=new Array(i);c[0]=p;var l={};for(var a in t)hasOwnProperty.call(t,a)&&(l[a]=t[a]);l.originalType=e,l[E]="string"==typeof e?e:o,c[1]=l;for(var k=2;k<i;k++)c[k]=r[k];return n.createElement.apply(null,c)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},93033:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>k});var n=r(87462),o=(r(67294),r(3905));const i={},c=void 0,l={unversionedId:"docker/Kubernetes",id:"docker/Kubernetes",title:"Kubernetes",description:"k8s-\u5bb9\u5668\u534f\u8c03\u5668-\u89e3\u51b3docker\u95ee\u9898",source:"@site/programming-tech/docker/06-Kubernetes.md",sourceDirName:"docker",slug:"/docker/Kubernetes",permalink:"/docker/Kubernetes",draft:!1,editUrl:"https://github.com/huiruo/programming-tech-website/edit/main/programming-tech/docker/06-Kubernetes.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"docs",previous:{title:"K8S\u57fa\u7840",permalink:"/docker/K8S\u57fa\u7840"},next:{title:"dockerSwarm",permalink:"/docker/dockerSwarm"}},a={},k=[{value:"k8s-\u5bb9\u5668\u534f\u8c03\u5668-\u89e3\u51b3docker\u95ee\u9898",id:"k8s-\u5bb9\u5668\u534f\u8c03\u5668-\u89e3\u51b3docker\u95ee\u9898",level:2},{value:"\u5728\u5fae\u670d\u52a1\u67b6\u6784\u7684\u8d8b\u52bf\u4e0b\uff0c\u670d\u52a1\u62c6\u5206\u6210\u4e86\u5fae\u670d\u52a1\u6a21\u5f0f",id:"\u5728\u5fae\u670d\u52a1\u67b6\u6784\u7684\u8d8b\u52bf\u4e0b\u670d\u52a1\u62c6\u5206\u6210\u4e86\u5fae\u670d\u52a1\u6a21\u5f0f",level:2},{value:"CRI\u7684\u5b9e\u73b0\u65b9\u6848\u6709\u4e24\u79cd",id:"cri\u7684\u5b9e\u73b0\u65b9\u6848\u6709\u4e24\u79cd",level:3},{value:"containerd",id:"containerd",level:3},{value:"\u4e0d\u540c\u65b9\u5f0f\u4f7f\u7528\u56fe\u4f8b",id:"\u4e0d\u540c\u65b9\u5f0f\u4f7f\u7528\u56fe\u4f8b",level:2},{value:"\u5982\u679c\u662f kubelet \u7684 dockershim \u6a21\u5f0f\uff08\u7d2b\u8272\uff09\uff0c\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a",id:"\u5982\u679c\u662f-kubelet-\u7684-dockershim-\u6a21\u5f0f\u7d2b\u8272\u6d41\u7a0b\u662f\u8fd9\u6837\u7684",level:3},{value:"\u5982\u679c\u662f kubelet \u7684 cri-containerd \u6a21\u5f0f\uff08\u6a59\u8272\uff09\uff0c\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a",id:"\u5982\u679c\u662f-kubelet-\u7684-cri-containerd-\u6a21\u5f0f\u6a59\u8272\u6d41\u7a0b\u662f\u8fd9\u6837\u7684",level:3},{value:"\u5982\u679c\u662f kubelet \u7684 cri-o \u6a21\u5f0f\uff08\u7ea2\u8272\uff09\uff0c\u5219\u66f4\u52a0\u7b80\u7ec3\uff1a",id:"\u5982\u679c\u662f-kubelet-\u7684-cri-o-\u6a21\u5f0f\u7ea2\u8272\u5219\u66f4\u52a0\u7b80\u7ec3",level:3}],u={toc:k},E="wrapper";function d(e){let{components:t,...i}=e;return(0,o.kt)(E,(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"k8s-\u5bb9\u5668\u534f\u8c03\u5668-\u89e3\u51b3docker\u95ee\u9898"},"k8s-\u5bb9\u5668\u534f\u8c03\u5668-\u89e3\u51b3docker\u95ee\u9898"),(0,o.kt)("p",null,"\u5c3d\u7ba1Docker\u4e3a\u5bb9\u5668\u5316\u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u5f00\u653e\u6807\u51c6\uff0c\u4f46\u968f\u7740\u5bb9\u5668\u8d8a\u6765\u8d8a\u591a\u51fa\u73b0\u4e86\u4e00\u7cfb\u5217\u65b0\u95ee\u9898\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u5982\u4f55\u534f\u8c03\u548c\u8c03\u5ea6\u8fd9\u4e9b\u5bb9\u5668\uff1f")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u5982\u4f55\u5728\u5347\u7ea7\u5e94\u7528\u7a0b\u5e8f\u65f6\u4e0d\u4f1a\u4e2d\u65ad\u670d\u52a1\uff1f")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u5982\u4f55\u76d1\u89c6\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u72b6\u51b5\uff1f")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\u5982\u4f55\u6279\u91cf\u91cd\u65b0\u542f\u52a8\u5bb9\u5668\u91cc\u7684\u7a0b\u5e8f\uff1f"))),(0,o.kt)("p",null,"\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u9700\u8981\u5bb9\u5668\u7f16\u6392\u6280\u672f\uff0c\u53ef\u4ee5\u5c06\u4f17\u591a\u673a\u5668\u62bd\u8c61\uff0c\u5bf9\u5916\u5448\u73b0\u51fa\u4e00\u53f0\u8d85\u5927\u673a\u5668\u3002\u73b0\u5728\u4e1a\u754c\u6bd4\u8f83\u6d41\u884c\u7684\u6709\uff1ak8s\u3001Mesos\u3001Docker Swarm\u3002"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u8d1f\u8f7d\u5747\u8861"),(0,o.kt)("li",{parentName:"ul"},"\u9ad8\u53ef\u7528"),(0,o.kt)("li",{parentName:"ul"},"\u9ad8\u5e76\u53d1\uff08\u591a\u5b9e\u4f8b\uff09"),(0,o.kt)("li",{parentName:"ul"},"\u96c6\u7fa4\u7ba1\u7406")),(0,o.kt)("p",null,"\u5728\u4e1a\u52a1\u53d1\u5c55\u521d\u671f\u53ea\u6709\u51e0\u4e2a\u5fae\u670d\u52a1\uff0c\u8fd9\u65f6\u7528 Docker \u5c31\u8db3\u591f\u4e86\uff0c\u4f46\u968f\u7740\u4e1a\u52a1\u89c4\u6a21\u9010\u6e10\u6269\u5927\uff0c\u5bb9\u5668\u8d8a\u6765\u8d8a\u591a\uff0c\u8fd0\u7ef4\u4eba\u5458\u7684\u5de5\u4f5c\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u7f16\u6392\u7cfb\u7edf\u89e3\u6551opers\u3002"),(0,o.kt)("h2",{id:"\u5728\u5fae\u670d\u52a1\u67b6\u6784\u7684\u8d8b\u52bf\u4e0b\u670d\u52a1\u62c6\u5206\u6210\u4e86\u5fae\u670d\u52a1\u6a21\u5f0f"},"\u5728\u5fae\u670d\u52a1\u67b6\u6784\u7684\u8d8b\u52bf\u4e0b\uff0c\u670d\u52a1\u62c6\u5206\u6210\u4e86\u5fae\u670d\u52a1\u6a21\u5f0f"),(0,o.kt)("p",null,"\u4e3a\u4e86\u4fdd\u969c\u9ad8\u53ef\u7528\uff0c\u6838\u5fc3\u5fae\u670d\u52a1\u6309\u7167\u5206\u5e03\u5f0f\u8fdb\u884c\u90e8\u7f72\u3002\u4ee5\u6dd8\u5b9d\u7cfb\u7edf\u6765\u8bf4\uff0c\u5305\u542b\u4e0a\u5343\u4e2a\u5fae\u670d\u52a1\uff0c\u4e00\u4e2a\u8282\u70b9\u90e8\u7f72\u4e00\u4e2a\u5bb9\u5668\uff0c\u518d\u6309\u7167\u5206\u5e03\u5f0f\u96c6\u7fa4\u90e8\u7f72\uff0c\u6574\u4e2a\u6dd8\u5b9d\u7cfb\u7edf\u4f30\u8ba1\u5f97\u4e0a\u4e07\u4e2a\u8282\u70b9\uff0c\u9022\u5e74\u8fc7\u8282\uff0c\u8282\u70b9\u6570\u8fd8\u5728\u4e0d\u65ad\u7684\u589e\u52a0\uff0c\u90a3\u5c31\u9700\u8981\u7ba1\u7406\u4e86\u5440\uff0c\u4e0d\u7136\u600e\u4e48\u4fdd\u969c\u8282\u70b9\u4e4b\u95f4\u7684\u6b63\u5e38\u901a\u4fe1\uff0c\u95ee\u9898\u5feb\u901f\u89e3\u51b3\u5462\uff1f\u4e8e\u662fKubernetes\u4ea7\u751f\u4e86\uff0c\u5b83\u63d0\u4f9b\u5e94\u7528\u7ea7\u7684\u96c6\u7fa4\u62bd\u8c61\uff0c\u628a\u6bcf\u4e2a\u5fae\u670d\u52a1\u62bd\u8c61\u6210service\uff0c\u4ee5Pod\u8fd0\u884c\uff0cPod\u5e95\u5c42\u662fDocker\uff0c\u5bf9\u5916\u63d0\u4f9b\u80fd\u529b"),(0,o.kt)("p",null,"\u95ee\u9898\u51fa\u73b0\u4e86\uff0cKubernetes\u672c\u8eab\u662f\u4e0d\u63d0\u4f9b\u5bb9\u5668\u8fd0\u884c\u73af\u5883\u7684\uff0c\u800c\u662f\u4f7f\u7528CRI\uff08ContainerRuntimeInterface\u5bb9\u5668\u8fd0\u884c\u63a5\u53e3\uff09\u5728\u5de5\u4f5c\u8282\u70b9\u521b\u5efa\u548c\u5220\u9664\u5bb9\u5668,\u56e0\u4e3aDocker\u4e0d\u7b26\u5408Kubernetes\u7684\u5bb9\u5668\u8fd0\u884c\u65f6\u63a5\u53e3\u6807\u51c6\uff08CRI\uff09\uff0c\u6240\u4ee5\u5b98\u65b9\u5fc5\u987b\u8981\u7ef4\u62a4\u4e00\u4e2a\u540d\u4e3aDockershim\u7684\u4e2d\u95f4\u4ef6\u624d\u80fd\u591f\u628aDocker\u5f53\u4f5cKubernetes\u7684\u5bb9\u5668\u8fd0\u884c\u65f6\u6765\u4f7f\u7528\u3002\u6b64\u5916Kubernetes\u4f7f\u7528\u7684\u662fDocker\u5bb9\u5668\u4e2d\u7684Cgroup\u80fd\u529b\uff0c\u5176\u5b83\u7684\u6a21\u5757\u5982\u7f51\u7edc\u3001\u5b58\u50a8\u5377\u90fd\u4e0d\u9700\u8981\u4f7f\u7528\uff0c\u7136\u800c\u5b83\u4eec\u5374\u968fDocker\u4e00\u8d77\u5728Kubernetes\u4e2d\u8fd0\u884c\uff0c\u8fd9\u5c31\u5bb9\u6613\u4ea7\u751f\u5b89\u5168\u9690\u60a3\u4e86\u3002\u7efc\u4e0a\u6240\u8ff0\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48Kubernetes\u8981\u5e9f\u5f03Docker\u4e86"),(0,o.kt)("p",null,"k8s \u7ecf\u5e38\u4e0e Docker \u8fdb\u884c\u642d\u914d\u4f7f\u7528\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u5bb9\u5668\uff0c\u5982RunC\u3001Containerted \u7b49\u3002"),(0,o.kt)("p",null,"\u4f5c\u4e3aKubernetes\u4e0eDocker\u5bb9\u5668\u7684\u7528\u6237\uff0c\u4e0d\u5fc5\u8981\u60ca\u614c\uff0c\u4f7f\u7528CRI\u8fd0\u884c\u65f6\u66ff\u4ee3\u65b9\u6848\u5373\u53ef\u3002"),(0,o.kt)("h3",{id:"cri\u7684\u5b9e\u73b0\u65b9\u6848\u6709\u4e24\u79cd"},"CRI\u7684\u5b9e\u73b0\u65b9\u6848\u6709\u4e24\u79cd"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Containerd\nContainerd\u662fCNCF\u4e91\u539f\u751f\u8ba1\u7b97\u57fa\u91d1\u4f1a\u5f00\u6e90\u9879\u76ee\uff0c\u5728GitHub\uff08",(0,o.kt)("a",{parentName:"li",href:"https://github.com/containerd/containerd/%EF%BC%89%E5%8F%AF%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%AE%83%E6%98%AF%E5%AE%B9%E5%99%A8%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%EF%BC%8C%E4%BB%8EDocker%E4%B8%AD%E5%89%A5%E7%A6%BB%E5%87%BA%E6%9D%A5%EF%BC%8C%E5%BD%A2%E6%88%90%E5%BC%80%E6%94%BE%E5%AE%B9%E5%99%A8%E6%8E%A5%E5%8F%A3%EF%BC%88OCI%EF%BC%89%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%8C%E5%AE%B9%E5%99%A8%E5%BC%95%E6%93%8E%E4%BD%BF%E7%94%A8%E5%AE%83%E5%8F%AF%E4%BB%A5%E8%BF%9B%E8%A1%8C%E6%95%B4%E4%B8%AA%E5%AE%B9%E5%99%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86%EF%BC%88%E5%88%9B%E5%BB%BA%EF%BC%89%E3%80%81%E6%8B%89%E5%8F%96/%E6%8E%A8%E9%80%81%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E3%80%81%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E9%95%9C%E5%83%8F%E3%80%81%E7%AE%A1%E7%90%86%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%8F%8A%E7%BD%91%E7%BB%9C%E3%80%82%E5%AE%83%E7%94%9F%E4%BA%8EDocker%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%AE%8C%E6%88%90%E6%89%80%E6%9C%89%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E5%B7%A5%E4%BD%9C%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%AE%83%E6%98%AF%E5%BE%88%E5%A5%BD%E7%9A%84%E9%80%89%E6%8B%A9%E3%80%82"},"https://github.com/containerd/containerd/\uff09\u53ef\u76f4\u63a5\u4e0b\u8f7d\u4f7f\u7528\uff0c\u5b83\u662f\u5bb9\u5668\u865a\u62df\u5316\u6280\u672f\uff0c\u4eceDocker\u4e2d\u5265\u79bb\u51fa\u6765\uff0c\u5f62\u6210\u5f00\u653e\u5bb9\u5668\u63a5\u53e3\uff08OCI\uff09\u7684\u4e00\u90e8\u5206\uff0c\u5bb9\u5668\u5f15\u64ce\u4f7f\u7528\u5b83\u53ef\u4ee5\u8fdb\u884c\u6574\u4e2a\u5bb9\u5668\u751f\u547d\u5468\u671f\u7ba1\u7406\uff08\u521b\u5efa\uff09\u3001\u62c9\u53d6/\u63a8\u9001\u5bb9\u5668\u955c\u50cf\u3001\u5b58\u50a8\u7ba1\u7406\u955c\u50cf\u3001\u7ba1\u7406\u5bb9\u5668\u7f51\u7edc\u63a5\u53e3\u53ca\u7f51\u7edc\u3002\u5b83\u751f\u4e8eDocker\uff0c\u53ef\u4ee5\u5b8c\u6210\u6240\u6709\u7684\u8fd0\u884c\u65f6\u5de5\u4f5c\uff0c\u4f7f\u7528\u5b83\u662f\u5f88\u597d\u7684\u9009\u62e9\u3002")),(0,o.kt)("li",{parentName:"ul"},"CRI-O\n\u4e0eContainerd\u76f8\u6bd4\uff0cCRI-O\u5c31\u4e0d\u90a3\u4e48\u53cb\u597d\u4e86\uff0c\u5b83\u662f\u7531\u7ea2\u5e3d\u5f00\u53d1\u7684\u7eafCRI\u8fd0\u884c\u65f6\uff0c\u5bf9\u4e8eRedHatOpenshit\u652f\u6301\u7684\u6bd4\u8f83\u597d\uff0c\u4e0d\u652f\u6301Docker\uff0c\u56e0\u6b64\u4eceDocker\u8fc1\u79fb\u5230CRI-O\u662f\u6bd4\u8f83\u9ebb\u70e6\u7684\u3002")),(0,o.kt)("p",null,"Kubernetes\u5b98\u65b9\u8868\u793aDocker\u4f5c\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u5bb9\u5668\u6280\u672f\u6808\uff0c\u5728\u521b\u5efa\u4e4b\u521d\u5c31\u4e0d\u662f\u4e3a\u4e86Kubernetes\u800c\u8bbe\u8ba1\u7684\u3002"),(0,o.kt)("p",null,"Kubernetes\u53ea\u662f\u5728v1.20\u7248\u672c\u540e\u4e0d\u63a8\u8350\u5c06Docker\u4f5c\u4e3a\u5bb9\u5668\u8fd0\u884c\u65f6\u4f7f\u7528\uff0c\u7528\u6237\u4eca\u540e\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528Docker\u6765\u6784\u5efa\u5bb9\u5668\u955c\u50cf\uff0c\u800cDocker\u751f\u6210\u7684\u955c\u50cf\u5b9e\u9645\u4e0a\u4e5f\u662f\u4e00\u4e2aOCI\uff08OpenContainer Initiative\uff09\u955c\u50cf\u3002"),(0,o.kt)("p",null,"\u53ef\u4ee5\u8bf4\u65e0\u8bba\u4f7f\u7528\u4ec0\u4e48\u5de5\u5177\u6765\u6784\u5efa\u955c\u50cf\uff0c\u4efb\u4f55\u7b26\u5408OCI\u6807\u51c6\u7684\u955c\u50cf\u5728Kubernetes\u770b\u6765\u90fd\u662f\u4e00\u6837\u7684\u3002Containerd\u548cCRI-O\u5219\u53ef\u4ee5\u63d0\u53d6\u8fd9\u4e9b\u955c\u50cf\u5e76\u8fd0\u884c\u5b83\u4eec\u3002\u6280\u672f\u7684\u5347\u7ea7\u4e00\u822c\u6765\u8bf4\u90fd\u662f\u597d\u4e8b\uff0c\u5b83\u59cb\u7ec8\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u670d\u52a1\u624d\u505a\u6539\u52a8\u3002\u65e0\u8bba\u662f\u5f00\u53d1\u4eba\u5458\u3001\u8fd0\u7ef4\u4eba\u5458\uff0c\u6211\u4eec\u90fd\u9700\u8981\u62e5\u62b1\u53d8\u5316\u3002"),(0,o.kt)("h3",{id:"containerd"},"containerd"),(0,o.kt)("p",null,"\u4ece\u8f6f\u4ef6\u6a21\u5757\u7684\u89d2\u5ea6\uff0c\u56fe\u4e2d\u7684 docker Engine\u3001cri-containd\u3001containd-shim\u3001runC \u90fd\u5c5e\u4e8e Docker \u4f53\u7cfb\u7684\u8f6f\u4ef6\u3002"),(0,o.kt)("p",null,"Docker \u5e76\u975e\u4e00\u4e2a\u5355\u5c42\u8f6f\u4ef6\uff0cKubernetes 1.20 \u5f03\u7528 dockershim \u5e76\u4e0d\u4ee3\u8868\u5f03\u7528\u4e86 Docker \u7684\u5168\u90e8\uff0c\u4ecd\u6709 containerd \u53ef\u4ee5\u5bf9\u63a5 docker\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(96536).Z,width:"802",height:"343"})),(0,o.kt)("p",null,"\u4f5c\u4e3a Kubernetes \u7684\u5e95\u5c42\u8fd0\u884c\u65f6\u7684\u8bdd\uff0c\u9009\u62e9\u5206\u79bb\u81ea Docker \u7684 containerd \u4f1a\u66f4\u5408\u9002\u3002"),(0,o.kt)("p",null,"\u7528\u7684containerd\u505a\u7684\u8fd0\u884c\u65f6\u5927\u90e8\u5206\u529f\u80fd\u90fd\u80fd\u652f\u6301\u5427 \u4f46\u662f\u6253\u5305\u955c\u50cf\u8fd8\u662f\u7528\u7684docker \u6bd5\u7adf\u751f\u6001\u786e\u5b9e\u597d \u800c\u4e14dockerfile\u5199\u7684\u4e5f\u987a\u624b"),(0,o.kt)("h2",{id:"\u4e0d\u540c\u65b9\u5f0f\u4f7f\u7528\u56fe\u4f8b"},"\u4e0d\u540c\u65b9\u5f0f\u4f7f\u7528\u56fe\u4f8b"),(0,o.kt)("p",null,"\u4e0b\u56fe\u4e2d\u7684\u7d2b\u3001\u6a59\u3001\u7ea2\u4e09\u79cd\u989c\u8272\uff0c\u4ee3\u8868\u4e86 dockershim\u3001cri-containerd\u3001cri-o \u4e09\u79cd CRI \u7684\u5178\u578b\u65b9\u5f0f\u2014\u2014\u6d41\u7a0b\u5728\u9010\u6e10\u7f29\u77ed\uff0c\u8fd9\u4e5f\u662f CRI \u5b9e\u73b0\u7684\u4e00\u4e2a\u6f14\u8fdb\u8fc7\u7a0b\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(76218).Z,width:"837",height:"391"})),(0,o.kt)("h3",{id:"\u5982\u679c\u662f-kubelet-\u7684-dockershim-\u6a21\u5f0f\u7d2b\u8272\u6d41\u7a0b\u662f\u8fd9\u6837\u7684"},"\u5982\u679c\u662f kubelet \u7684 dockershim \u6a21\u5f0f\uff08\u7d2b\u8272\uff09\uff0c\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"kubelet\u4eceCRI\u7684gRPC\u8c03\u7528dockershim\uff0c\u4e8c\u8005\u5728\u540c\u4e00\u4e2a\u8fdb\u7a0b"),(0,o.kt)("li",{parentName:"ol"},"dockershim\u8c03\u7528docker\u5b88\u62a4\u8fdb\u7a0b"),(0,o.kt)("li",{parentName:"ol"},"docker\u5b88\u62a4\u8fdb\u7a0b\u8c03\u7528containerd\uff1bcontainerd\u8c03\u7528containerd-shim\uff08\u6709\u65f6\u540d\u4e3adocker-containerd-shim\u5b88\u62a4\u8fdb\u7a0b\uff09\u5b8c\u6210\u521b\u5efa\u5bb9\u5668\u7b49\u64cd\u4f5c"),(0,o.kt)("li",{parentName:"ol"},"containerd-shim\u8bbf\u95eeOCI\u7684\u5b9e\u73b0runC\uff08\u547d\u4ee4\u884c\u53ef\u6267\u884c\u7a0b\u5e8f\uff09")),(0,o.kt)("h3",{id:"\u5982\u679c\u662f-kubelet-\u7684-cri-containerd-\u6a21\u5f0f\u6a59\u8272\u6d41\u7a0b\u662f\u8fd9\u6837\u7684"},"\u5982\u679c\u662f kubelet \u7684 cri-containerd \u6a21\u5f0f\uff08\u6a59\u8272\uff09\uff0c\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"kubelet\u4eceCRI\u7684gRPC\u8c03\u7528cri-containerd\uff1b"),(0,o.kt)("li",{parentName:"ol"},"cri-containerd\u8c03\u7528containerd\uff1bcontainerd\u8c03\u7528containerd-shim\uff08\u540c\u4e0a\uff09"),(0,o.kt)("li",{parentName:"ol"},"containerd-shim\u8c03\u7528RucnC \uff08\u540c\u4e0a\uff09\uff1b")),(0,o.kt)("p",null,"\u5728\u5f88\u591a\u4eba\u7684\u5370\u8c61\u4e2d\uff0c\u5982\u679c\u4e0d\u7528 docker \u5b88\u62a4\u8fdb\u7a0b\uff0c\u5c31\u76f8\u5f53\u4e8e\u201c\u5f03\u7528 docker\u201c\uff0c\u8fd9\u5176\u5b9e\u4e5f\u5c31\u662f\u4ece dockershim \u5230 containerd \u7684\u53d8\u5316\u3002\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u6765\u8bf4\uff0ccontainerd \u8fd9\u4e2a\u5b88\u62a4\u8fdb\u7a0b\uff0c\u4e5f\u662f docker \u7ec4\u7ec7\u505a\u7684\u3002"),(0,o.kt)("h3",{id:"\u5982\u679c\u662f-kubelet-\u7684-cri-o-\u6a21\u5f0f\u7ea2\u8272\u5219\u66f4\u52a0\u7b80\u7ec3"},"\u5982\u679c\u662f kubelet \u7684 cri-o \u6a21\u5f0f\uff08\u7ea2\u8272\uff09\uff0c\u5219\u66f4\u52a0\u7b80\u7ec3\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"kubelet\u4eceCRI\u7684gRPC\u8c03\u7528cri-o\uff1b"),(0,o.kt)("li",{parentName:"ol"},"cri-o\u8c03\u7528OCI\u7684\u5b9e\u73b0runC")),(0,o.kt)("p",null,"\u5982\u679c\u4ee5 kubelet \u8c03\u7528 CRI \u4e3a\u8d77\u70b9\uff0cOCI \u7684 runC \u8c03\u7528\u4e3a\u7ec8\u70b9\uff0c\u4e09\u79cd\u6a21\u5f0f\u7ecf\u5386\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\u5206\u522b\u662f\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"dockershim\u6a21\u5f0f\uff1a")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"dockershim(*)->dockd->containerd->containerd-shim\n")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"cri-containerd\u6a21\u5f0f\uff1a")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cri-containerd(*)-> containerd->containerd-shim\n")),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"cri-o\u6a21\u5f0f\uff1acri-o")),(0,o.kt)("p",null,"dockershim \u6a21\u5f0f\u6709 3 \u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\uff0cdockershim \u4e00\u822c\u4e0e kubelet \u540c\u8fdb\u7a0b\uff1bcri-containerd \u6a21\u5f0f\u6709 2-3 \u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\uff0ccri-containerd \u53ef\u4e0e containerd \u540c\u8fdb\u7a0b\uff1bcri-o \u6a21\u5f0f\u53ea\u6709 1 \u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u3002"),(0,o.kt)("p",null,"\u663e\u7136\u5728\u8fd9\u79cd Red Hat \u63a8\u5d07\u7684 cri-o \u6a21\u5f0f\u4e0b\uff0cDocker \u4f53\u7cfb\u7684 containerd \u4e5f\u7528\u4e0d\u7740\u4e86\uff0c\u53ea\u5269 runC \u8fd9\u4e2a\u547d\u4ee4\u884c\u7684\u7a0b\u5e8f\u3002runC \u4e5f\u662f\u7528 go \u5199\u6210\u7684\uff0c\u91cc\u9762\u6709\u8c03\u7528 libcontainer\u3002"),(0,o.kt)("p",null,"\u5f53 Docker \u840e\u7f29\u5230\u8fd9\u4e2a\u5730\u6b65\uff0c\u5176\u5b9e\u4e5f\u53ea\u5269 Linux \u5185\u6838\u91cc\u9762 cgroup\u3001namespace \u529f\u80fd\u7684\u5c01\u88c5\u4e86\u3002"))}d.isMDXComponent=!0},96536:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/docker-01-f2e444104a4f40adb38a60fbf686ebca.png"},76218:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/docker-02-24c31fdb8817ebfb6339e559e9928dd3.png"}}]);