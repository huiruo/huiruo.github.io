"use strict";(self.webpackChunkprogramming_technology=self.webpackChunkprogramming_technology||[]).push([[9835],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var l=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,l,a=function(e,n){if(null==e)return{};var t,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=l.createContext({}),c=function(e){var n=l.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=c(e.components);return l.createElement(s.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},g=l.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(t),g=a,m=u["".concat(s,".").concat(g)]||u[g]||d[g]||r;return t?l.createElement(m,o(o({ref:n},p),{},{components:t})):l.createElement(m,o({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=g;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[u]="string"==typeof e?e:a,o[1]=i;for(var c=2;c<r;c++)o[c]=t[c];return l.createElement.apply(null,o)}return l.createElement.apply(null,t)}g.displayName="MDXCreateElement"},19748:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var l=t(87462),a=(t(67294),t(3905));const r={title:"v8\u7f16\u8bd1",sidebar_position:2},o=void 0,i={unversionedId:"C++-V8/v8\u7f16\u8bd1",id:"C++-V8/v8\u7f16\u8bd1",title:"v8\u7f16\u8bd1",description:"\u7cfb\u7edf\u73af\u5883\u8981\u6c42",source:"@site/programming-tech/C++-V8/03-v8\u7f16\u8bd1.md",sourceDirName:"C++-V8",slug:"/C++-V8/v8\u7f16\u8bd1",permalink:"/C++-V8/v8\u7f16\u8bd1",draft:!1,editUrl:"https://github.com/huiruo/programming-tech-website/edit/main/programming-tech/C++-V8/03-v8\u7f16\u8bd1.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"v8\u7f16\u8bd1",sidebar_position:2},sidebar:"docs",previous:{title:"\u7f16\u8bd1\u5de5\u5177-depot_tools",permalink:"/C++-V8/\u7f16\u8bd1\u5de5\u5177-depot_tools"},next:{title:"chromium\u7f16\u8bd1",permalink:"/C++-V8/chromium/chromium\u7f16\u8bd1"}},s={},c=[{value:"\u7cfb\u7edf\u73af\u5883\u8981\u6c42",id:"\u7cfb\u7edf\u73af\u5883\u8981\u6c42",level:2},{value:"python",id:"python",level:2},{value:"git",id:"git",level:2},{value:"\u6267\u884c",id:"\u6267\u884c",level:2},{value:"\u62a5\u9519",id:"\u62a5\u9519",level:2},{value:"\u7f16\u8bd1\u4ee3\u7801,\u4e24\u79cd\u65b9\u5f0f\uff1a",id:"\u7f16\u8bd1\u4ee3\u7801\u4e24\u79cd\u65b9\u5f0f",level:2},{value:"\u65b9\u5f0f1\uff1a\u547d\u4ee4\u65b9\u5f0f",id:"\u65b9\u5f0f1\u547d\u4ee4\u65b9\u5f0f",level:3},{value:"\u65b9\u5f0f2\uff1avs\u5de5\u7a0b\u65b9\u5f0f",id:"\u65b9\u5f0f2vs\u5de5\u7a0b\u65b9\u5f0f",level:3},{value:"\u751f\u6210GN\u5de5\u7a0b\u6587\u4ef6",id:"\u751f\u6210gn\u5de5\u7a0b\u6587\u4ef6",level:5},{value:"build gn_all",id:"build-gn_all",level:4},{value:"\u4f8b\u5b501:hellow world",id:"\u4f8b\u5b501hellow-world",level:3},{value:"\u4f8b\u5b502:\u8c03\u8bd5shell.cc",id:"\u4f8b\u5b502\u8c03\u8bd5shellcc",level:3}],p={toc:c},u="wrapper";function d(e){let{components:n,...r}=e;return(0,a.kt)(u,(0,l.Z)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u7cfb\u7edf\u73af\u5883\u8981\u6c42"},"\u7cfb\u7edf\u73af\u5883\u8981\u6c42"),(0,a.kt)("p",null,"\u64cd\u4f5c\u7cfb\u7edf win 10 64bit,VS2019\u793e\u533a\u7248\nwindows 10 SDK"),(0,a.kt)("p",null,"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"DEPOT_TOOLS_WIN_TOOLCHAIN = 0\n")),(0,a.kt)("h2",{id:"python"},"python"),(0,a.kt)("p",null,"C:\\Users\\chenh\\AppData\\Local\\Programs\\Python\\Python311"),(0,a.kt)("h2",{id:"git"},"git"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# \u7981\u7528\u81ea\u52a8\u8f6c\u6362\ngit config --global core.autocrlf false\n\ngit config --global core.filemode false\n\n# \u975e\u5fc5\u987b\uff0c\u5728 config \u4e2d\u8bbe\u7f6e rebase \u9009\u9879\uff0c\u4f7f\u5f97 git pull \u4f7f\u7528 rebase \u6574\u5408\u6240\u505a\u4fee\u6539\n# https://www.jianshu.com/p/280a04fc2e2b\ngit config --global pull.rebase true\ngit config --global branch.autosetuprebase always\n")),(0,a.kt)("p",null,"Git\u5bf9\u6587\u4ef6\u7684\u8bbf\u95ee\u6743\u9650\u7684\u7ba1\u7406\u4e0e\u914d\u7f6e\u9009\u9879core.filemode\u6709\u5173\u3002core.filemode\u9009\u9879\u9ed8\u8ba4true\uff0c\u5373\u533a\u5206\u6587\u4ef6\u7684\u6267\u884c\u6743\u9650\uff0c\u6821\u9a8cGit\u7684Index\u4e2d\u548c\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u6743\u9650\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u67e5\u770bfilemode\u9009\u9879\ngit config --get core.filemode\n\u6216\ngit config core.filemode")),(0,a.kt)("h2",{id:"\u6267\u884c"},"\u6267\u884c"),(0,a.kt)("p",null,"\u7b2c\u4e8c\u4e2a\u62a5\u9519\u65e0\u5173"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},">gclient sync\nUpdating depot_tools...\nC:\\zip-app\\depot_tools\\.versions\\.cipd_client.exe.cipd_version\nC:\\zip-app\\depot_tools\\.versions\\.cipd_client.exe.cipd_version\nSyncing projects: 100% (29/29), done.\n\n________ running 'cipd ensure -log-level error -root C:\\C-workspace\\V8-2 -ensure-file C:\\Users\\chenh\\AppData\\Local\\Temp\\tmpzkxe1n2g.ensure' in '.'\nC:\\zip-app\\depot_tools\\.versions\\.cipd_client.exe.cipd_version\nRunning hooks: 100% (32/32), done.\n")),(0,a.kt)("h2",{id:"\u62a5\u9519"},"\u62a5\u9519"),(0,a.kt)("p",null,"Windows Software Development Kit"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'Exception: Path "C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.20348.0\\shared" from environment variable "include" does not exist. Make sure the necessary SDK is installed.\n')),(0,a.kt)("p",null,"\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u5728Visual Studio Installer-\u5355\u4e2a\u7ec4\u4ef6-\u4e2d\u5b89\u88c510.0.20348.0\u7248\u672c\u7684SDK,\u6ce8\u610f\uff1a 10.0.20348.0\u7248\u672c\u7684SDK\u5b89\u88c5\u6210\u529f\u540e\u522b\u5fd8\u4e86\u5b89\u88c5SDK\u8c03\u8bd5\u5de5\u5177"),(0,a.kt)("p",null,"\u5de5\u7a0b\u751f\u6210\u6210\u529f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"E:\\webrtc\\webrtc\\src>gn gen --ide=vs2019 out/Default\nGenerating Visual Studio projects took 1226ms\nDone. Made 1520 targets from 282 files in 9194ms\n")),(0,a.kt)("p",null,"\u6253\u5f00out/Default\u76ee\u5f55\u5c31\u80fd\u770b\u89c1vs\u5de5\u7a0b\u6587\u4ef6\u4e86\uff01\n",(0,a.kt)("img",{src:t(58681).Z,width:"806",height:"212"})),(0,a.kt)("p",null,"\u5728\u6b64\u4e4b\u540e\uff0c\u5c31\u53ef\u5728Visual Studio\u4e2d\u5bf9webrtc\u8fdb\u884c\u8c03\u8bd5\u4e86"),(0,a.kt)("h2",{id:"\u7f16\u8bd1\u4ee3\u7801\u4e24\u79cd\u65b9\u5f0f"},"\u7f16\u8bd1\u4ee3\u7801,\u4e24\u79cd\u65b9\u5f0f\uff1a"),(0,a.kt)("h3",{id:"\u65b9\u5f0f1\u547d\u4ee4\u65b9\u5f0f"},"\u65b9\u5f0f1\uff1a\u547d\u4ee4\u65b9\u5f0f"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://v8.dev/docs/embed"},"https://v8.dev/docs/embed")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"gn args out.gn/x64.release.sample\uff08\u4f1a\u5f39\u51fa\u4e00\u4e2a\u6587\u4ef6\u9700\u8981\u4f60\u7f16\u8f91\uff0c\u7f16\u8f91\u5b8c\u540e\u5173\u95ed\u5c31\u4f1a\u6839\u636e\u4f60\u586b\u5199\u7684\u53c2\u6570\u751f\u6210\u4e00\u4e9b\u914d\u7f6e\u6587\u4ef6\uff09")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"ninja -C out.gn/x64.release.sample v8_monolith\uff0c\u518d\u901a\u8fc7\u547d\u4ee4\u5c31\u53ef\u4ee5\u751f\u6210\u9759\u6001\u5e93\u4e86\uff0c\u5927\u6982\u9700\u8981\u7f16\u8bd1\u5341\u51e0\u5206\u949f"))),(0,a.kt)("h3",{id:"\u65b9\u5f0f2vs\u5de5\u7a0b\u65b9\u5f0f"},"\u65b9\u5f0f2\uff1avs\u5de5\u7a0b\u65b9\u5f0f"),(0,a.kt)("h5",{id:"\u751f\u6210gn\u5de5\u7a0b\u6587\u4ef6"},"\u751f\u6210GN\u5de5\u7a0b\u6587\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'cd ~\\v8\\src # \u8fdb\u5165v8 src\u76ee\u5f55\ngn gen --ide=vs out\\default --args="is_component_build = true is_debug = true v8_optimized_debug = false"\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'C:\\C-workspace\\V8-2\\v8\\src>gn gen --ide=vs out\\default --args="is_component_build = true is_debug = true v8_optimized_debug = false"\nGenerating Visual Studio projects took 148ms\nDone. Made 187 targets from 100 files in 4770ms\n')),(0,a.kt)("p",null,"gn\u547d\u4ee4\u4e0d\u662f\u672c\u6587\u91cd\u70b9\uff0c\u53ef\u81ea\u884c\u67e5\u9605\uff0c\u53c2\u6570\uff1ais_debug = true \u8ba9v8\u53ef\u4ee5\u88ab\u8c03\u8bd5\uff0cv8_optimized_debug = false \u53bb\u6389\u5bf9\u8c03\u8bd5v8\u6709\u5e72\u6270\u7684\u4ee3\u7801\u4f18\u5316\uff0c\u8fd9\u4e0d\u4f1a\u5f71\u54cdv8\u7684\u6b63\u786e\u6027\uff0c\u53ea\u53ef\u80fd\u5bf9\u6027\u80fd\u6709\u70b9\u5f71\u54cd,\u4e0b\u6587\u662f\u6211\u7684\u7f16\u8bd1\u914d\u7f6e\u6587\u4ef6args.gn\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"is_component_build = true  \nis_debug = true  \nv8_optimized_debug = false  \nv8_use_snapshot = false\n")),(0,a.kt)("p",null,"\u6216\u5219\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u547d\u4ee4\u751f\u6210vs\u5de5\u7a0ball.sln")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"gn gen --ide=vs out.gn\\x64_solution\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u6253\u5f00\u5de5\u7a0b\u7136\u540e\u7f16\u8bd1\u4f60\u9700\u8981\u7684\u9879\u76ee")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"vs\u5de5\u7a0b\u65b9\u5f0f\u7684\u8bdd\uff0c\u76f4\u63a5\u7f16\u8bd1v8_hello_world\u8fd9\u4e2a\u9879\u76ee\uff0c\u7136\u540e\u4f1a\u5728out.gn\\x64_solution\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u751f\u6210\nv8_hello_world.exe\n")),(0,a.kt)("h4",{id:"build-gn_all"},"build gn_all"),(0,a.kt)("p",null,"\u7f16\u8bd1\u4e4b\uff0c\u6700\u540e\u5373\u53ef\u8c03\u8bd5out\\Default\\d8.exe\u3002"),(0,a.kt)("h3",{id:"\u4f8b\u5b501hellow-world"},"\u4f8b\u5b501:hellow world"),(0,a.kt)("p",null,"V8\u4ee3\u7801\u91cf\u5927\u3001\u7ed3\u6784\u590d\u6742\u3001\u7c7b\u5f15\u7528\u7684\u5c42\u7ea7\u5173\u7cfb\u591a\uff0c\u8981\u6709\u4e00\u4e2a\u5408\u7406\u7684\u5165\u53e3\u624d\u597d\uff0cv8\u7684\u6e90\u7801\u90fd\u5728src\u76ee\u5f55\u4e0b\uff0c\u5982\u4e0b\u56fe\u3002"),(0,a.kt)("p",null,"\u9664\u4e86src\u76ee\u5f55\uff0c\u6211\u4eec\u770b\u5230\u8fd8\u6709\u4e00\u4e2asamples\u76ee\u5f55\uff0c\u5b83\u5c31\u662f\u6211\u4eec\u5f00\u59cb\u5b66\u4e60\u7684\u5730\u65b9\uff0c\u56fe1\u4e2d\u6253\u5f00\u7684\u6587\u4ef6(hello-world.cc)\u6b63\u662f\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\uff0c\u8fd9\u4e2ahello world\u7a0b\u5e8f\u662f\u7528C++\u7f16\u5199\u7684\uff0c\u5305\u62ec\u4e86\u542f\u52a8V8\uff0c\u7136\u540e\u8fd0\u884c\u4e00\u4e2ajavascript\u8bed\u8a00\u7684hello world\uff0c\u8fd8\u6709\u4e00\u4e2a\u52a0\u6cd5\u8fd0\u7b97\u3002\u51c6\u786e\u5730\u8bf4\uff0cV8\u662f\u4e00\u4e2ajavascript\u865a\u62df\u673a\uff0c\u8fd9\u4e2ahello word.cc\u4e2d\u4ec5\u6709\u201dhello world\u201d\u548c\u52a0\u6cd5\u7b97\u6cd5\u662f\u4e00\u4e2a\u771f\u6b63\u7684javascript\u7a0b\u5e8f\uff0c\u5176\u5b83\u7684\u4ee3\u7801\u90fd\u662f\u4e3a\u4e86\u8fd0\u884cjavascript\u7a0b\u5e8f\u800c\u505a\u7684\u51c6\u5907\u5de5\u4f5c(\u542f\u52a8V8\u865a\u62df\u673a)\uff0c\u5305\u62ec\u4e86V8\u7684\u521b\u5efa\u3001Isolate\u521b\u5efa\u3001handle\u521b\u5efa\uff0c\u7f16\u8bd1\uff0c\u8f93\u51fahello world\uff0c\u518d\u7ed3\u675fV8\u7684\u5168\u8fc7\u7a0b\u3002\u8fd9\u91cc\u53ea\u5305\u62ec\u4e86V8\u6700\u7b80\u5355\u6700\u5fc5\u8981\u7684\u529f\u80fd\u96c6\uff0c\u6240\u4ee5\uff0c\u4ece\u8ddf\u8e2ahello-world.cc\u5165\u624b\u5b66\u4e60V8\u662f\u6700\u7b80\u5355\u7684\u3002"),(0,a.kt)("p",null,"\u5728src\\out\\default\u4e0b\uff0c\u80fd\u770b\u5230all.sln\uff0c\u53cc\u51fb\u6253\u5f00,\u5982\u56fe-1\u3002\n\u80fd\u770b\u5230v8_hello_world\u8fd9\u4e2a\u65b9\u6848\uff0c\u9f20\u6807\u53f3\u51fb\u201c\u8bbe\u4e3a\u542f\u52a8\u9879\u76ee\u201d\uff0c\u518d\u6b21\u9f20\u6807\u53f3\u51fb\u201c\u751f\u6210\u201d\uff0c\u8fd9\u6837\u5c31\u5f00\u59cb\u7f16\u8bd1\u4e86\uff0c\u5728\u56fe1\u4e0b\u65b9\u7684\u8f93\u51fa\u7a97\u53e3\uff0c\u80fd\u770b\u5230\u7f16\u8bd1\u8fc7\u7a0b\u3002\u7f16\u8bd1\u65f6\u95f4\u957f\u77ed\u8981\u770b\u673a\u5668\u6027\u80fd\uff1aCPU\u548c\u5185\u5b58\u9891\u7387\u3001\u786c\u76d8\u8bfb\u5199\u901f\u5ea6\u3002\n",(0,a.kt)("img",{src:t(22091).Z,width:"1913",height:"1036"})),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"1>[1966/1967] LINK(DLL) v8.dll v8.dll.lib v8.dll.pdb\n1>[1967/1967] LINK v8_hello_world.exe v8_hello_world.exe.pdb\n========== \u751f\u6210: \u6210\u529f 1 \u4e2a\uff0c\u5931\u8d25 0 \u4e2a\uff0c\u6700\u65b0 0 \u4e2a\uff0c\u8df3\u8fc7 0 \u4e2a ==========\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(56607).Z,width:"574",height:"68"})),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c++"},"      // Create a string containing the JavaScript source code.\n      v8::Local<v8::String> source =\n          v8::String::NewFromUtf8Literal(isolate, \"'Hello' + ', World!'\");\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-C++"},'#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#include "include/libplatform/libplatform.h"\n#include "include/v8-context.h"\n#include "include/v8-initialization.h"\n#include "include/v8-isolate.h"\n#include "include/v8-local-handle.h"\n#include "include/v8-primitive.h"\n#include "include/v8-script.h"\n\nint main(int argc, char* argv[]) {\n  // Initialize V8.\n  v8::V8::InitializeICUDefaultLocation(argv[0]);\n  v8::V8::InitializeExternalStartupData(argv[0]);\n  std::unique_ptr<v8::Platform> platform = v8::platform::NewDefaultPlatform();\n  v8::V8::InitializePlatform(platform.get());\n  v8::V8::Initialize();\n\n  // Create a new Isolate and make it the current one.\n  v8::Isolate::CreateParams create_params;\n  create_params.array_buffer_allocator =\n      v8::ArrayBuffer::Allocator::NewDefaultAllocator();\n  v8::Isolate* isolate = v8::Isolate::New(create_params);\n  {\n    v8::Isolate::Scope isolate_scope(isolate);\n\n    // Create a stack-allocated handle scope.\n    v8::HandleScope handle_scope(isolate);\n\n    // Create a new context.\n    v8::Local<v8::Context> context = v8::Context::New(isolate);\n\n    // Enter the context for compiling and running the hello world script.\n    v8::Context::Scope context_scope(context);\n\n    {\n      // Create a string containing the JavaScript source code.\n      v8::Local<v8::String> source =\n          v8::String::NewFromUtf8Literal(isolate, "\'Hello\' + \', World!\'");\n\n      // Compile the source code.\n      v8::Local<v8::Script> script =\n          v8::Script::Compile(context, source).ToLocalChecked();\n\n      // Run the script to get the result.\n      v8::Local<v8::Value> result = script->Run(context).ToLocalChecked();\n\n      // Convert the result to an UTF8 string and print it.\n      v8::String::Utf8Value utf8(isolate, result);\n      printf("%s\\n", *utf8);\n    }\n\n    {\n      // Use the JavaScript API to generate a WebAssembly module.\n      //\n      // |bytes| contains the binary format for the following module:\n      //\n      //     (func (export "add") (param i32 i32) (result i32)\n      //       get_local 0\n      //       get_local 1\n      //       i32.add)\n      //\n      const char csource[] = R"(\n        let bytes = new Uint8Array([\n          0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00, 0x01, 0x07, 0x01,\n          0x60, 0x02, 0x7f, 0x7f, 0x01, 0x7f, 0x03, 0x02, 0x01, 0x00, 0x07,\n          0x07, 0x01, 0x03, 0x61, 0x64, 0x64, 0x00, 0x00, 0x0a, 0x09, 0x01,\n          0x07, 0x00, 0x20, 0x00, 0x20, 0x01, 0x6a, 0x0b\n        ]);\n        let module = new WebAssembly.Module(bytes);\n        let instance = new WebAssembly.Instance(module);\n        instance.exports.add(3, 4);\n      )";\n\n      // Create a string containing the JavaScript source code.\n      v8::Local<v8::String> source =\n          v8::String::NewFromUtf8Literal(isolate, csource);\n\n      // Compile the source code.\n      v8::Local<v8::Script> script =\n          v8::Script::Compile(context, source).ToLocalChecked();\n\n      // Run the script to get the result.\n      v8::Local<v8::Value> result = script->Run(context).ToLocalChecked();\n\n      // Convert the result to a uint32 and print it.\n      uint32_t number = result->Uint32Value(context).ToChecked();\n      printf("3 + 4 = %u\\n", number);\n    }\n  }\n\n  // Dispose the isolate and tear down V8.\n  isolate->Dispose();\n  v8::V8::Dispose();\n  v8::V8::DisposePlatform();\n  delete create_params.array_buffer_allocator;\n  return 0;\n}\n')),(0,a.kt)("h3",{id:"\u4f8b\u5b502\u8c03\u8bd5shellcc"},"\u4f8b\u5b502:\u8c03\u8bd5shell.cc"),(0,a.kt)("p",null,"\u5b83\u7684\u4f4d\u7f6e\u5728samples\\\u4e0b,\u53ea\u662f\u56e0\u4e3ashell\u7684\u4ea4\u4e92\u6027\u66f4\u5f3a\uff0c\u8ba9\u4f60\u770b\u5230\u201d\u52a8\u8d77\u6765\u201d\u7684\u6548\u679c\u66f4\u660e\u663e,\u8fd9\u4e2a\u5de5\u7a0b\u8bbe\u7f6e\u4e3a\u542f\u52a8\u9879\uff0c\u7136\u540e\u751f\u6210;\n\u8fd9\u65f6\uff0c\u6211\u4eec\u5728elements.cc\u4e2d\u4e0b\u65ad\u70b9\uff0c\u5982\u4e0b\u56fe\u3002"),(0,a.kt)("p",null,"\u5728\u8fd9\u6837\u56fe\u4e2d\uff0c\u80fd\u770b\u5230\u65ad\u70b9\uff0c\u8fd8\u6709\u8c03\u7528\u5806\u6808\uff0c\u4ece\u4e2d\u80fd\u770b\u5230\u51fd\u6570\u7684\u8c03\u7528\u8fc7\u7a0b\uff0c\u5728shell\u7a97\u53e3\u4e2d\u6267\u884c\u5982\u4e0b\u6307\u4ee4\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"a=[1,2,3,4]\na.length = 10 // \u7279\u610f\u6539\u53d8\u6570\u7ec4\u957f\u5ea6\uff0c\u4e3a\u4e86\u80fd\u89e6\u53d1\u65ad\u70b9\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-C++"},"static Maybe<bool> SetLengthImpl(Isolate* isolate, Handle<JSArray> array,\n                                  uint32_t length,\n                                  Handle<FixedArrayBase> backing_store) {\n  DCHECK(!array->SetLengthWouldNormalize(length));\n  DCHECK(IsFastElementsKind(array->GetElementsKind()));\n  uint32_t old_length = 0;\n  CHECK(array->length().ToArrayIndex(&old_length));\n\n  if (old_length < length) {\n    ElementsKind kind = array->GetElementsKind();\n    if (!IsHoleyElementsKind(kind)) {\n      kind = GetHoleyElementsKind(kind);\n      JSObject::TransitionElementsKind(array, kind);\n    }\n  }\n  // \u7701\u7565\n}\n")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(24048).Z,width:"1705",height:"866"})),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"[1,2,3,4].join(\"-\")\n// 1-2-3-4\n'1-2-3-4'.split('-')\n\n[1,2,3,4].map((value, key, arr) => {console.log(value);return value * value;})\n// 1,4,9,16\n")))}d.isMDXComponent=!0},58681:(e,n,t)=>{t.d(n,{Z:()=>l});const l=t.p+"assets/images/\u7528VS2019\u7f16\u8bd1V8-1-fa68aaa07f29c9c8be5d9f8bff9f8c3d.png"},56607:(e,n,t)=>{t.d(n,{Z:()=>l});const l="data:image/png;base64,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"},24048:(e,n,t)=>{t.d(n,{Z:()=>l});const l=t.p+"assets/images/\u7528VS2019\u7f16\u8bd1V8-3-6609bc3c00794598607aa73ce0fae0e4.png"},22091:(e,n,t)=>{t.d(n,{Z:()=>l});const l=t.p+"assets/images/\u7528VS2019\u7f16\u8bd1V8-b263ac67ac56743a8fe955579f765c9d.png"}}]);